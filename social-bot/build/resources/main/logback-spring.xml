<configuration>

    <jmxConfigurator/>

    <!-- LOGGER CONFIGURATIONS -->
    <springProperty name="SENTRY_DNS" source="sentry.dns"/>
    <springProperty name="ENVIRONMENT" source="spring.profiles"/>

    <property name="LOG_PATH" value="/enactive-social-logs"/>
    <property name="PATTERN_DEFAULT" value="%highlight([%-5level]) %magenta([%date{ISO8601}] [%32.32X{stamp}] [%60.60(%class{40}->%method:%line)]) %msg%n"/>
    <property name="PATTERN_EXCEPT"
              value="%highlight([%-5level]) %magenta([%date{ISO8601}] [%32.32X{stamp}] [%60.60(%class{40}->%method:%line)]) [THREAD: %thread]%n%msg%n%xException{8}%n%n"/>
    <property name="PATTERN_CORE" value="%highlight([%-5level]) %magenta([%date{ISO8601}] [%60.60(%class{40}->%method:%line)]) %msg%n"/>
    <property name="DEFAULT_MAX_FILE_SIZE" value="100MB"/>
    <property name="DEFAULT_MAX_HISTORY" value="100"/>
    <property name="DEFAULT_ASYNC_QUEUE_SIZE" value="256"/>

    <appender name="system" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${LOG_PATH}/system.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>${LOG_PATH}/system.log.k2y-%d{yyyy-MM-dd}.%i.gz</fileNamePattern>
            <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>${DEFAULT_MAX_FILE_SIZE}</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
            <maxHistory>${DEFAULT_MAX_HISTORY}</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>${PATTERN_DEFAULT}</pattern>
        </encoder>
    </appender>
    
    <appender name="advice" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${LOG_PATH}/advice.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>${LOG_PATH}/advice.log.k2y-%d{yyyy-MM-dd}.%i.gz</fileNamePattern>
            <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>${DEFAULT_MAX_FILE_SIZE}</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
            <maxHistory>${DEFAULT_MAX_HISTORY}</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>${PATTERN_DEFAULT}</pattern>
        </encoder>
    </appender>
    
    <appender name="cognitive" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${LOG_PATH}/cognitive.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>${LOG_PATH}/cognitive.log.k2y-%d{yyyy-MM-dd}.%i.gz</fileNamePattern>
            <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>${DEFAULT_MAX_FILE_SIZE}</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
            <maxHistory>${DEFAULT_MAX_HISTORY}</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>${PATTERN_DEFAULT}</pattern>
        </encoder>
    </appender>

    <appender name="data_access" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${LOG_PATH}/data_access.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>${LOG_PATH}/data_access.log.k2y-%d{yyyy-MM-dd}.%i.gz</fileNamePattern>
            <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>${DEFAULT_MAX_FILE_SIZE}</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
            <maxHistory>${DEFAULT_MAX_HISTORY}</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>${PATTERN_DEFAULT}</pattern>
        </encoder>
    </appender>

    <appender name="exceptions" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${LOG_PATH}/exceptions.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>${LOG_PATH}/exceptions.log.k2y-%d{yyyy-MM-dd}.%i.gz</fileNamePattern>
            <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>${DEFAULT_MAX_FILE_SIZE}</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
            <maxHistory>${DEFAULT_MAX_HISTORY}</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>${PATTERN_EXCEPT}</pattern>
        </encoder>
    </appender>

    <appender name="core" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${LOG_PATH}/core.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>${LOG_PATH}/core.log.k2y-%d{yyyy-MM-dd}.%i.gz</fileNamePattern>
            <timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
                <maxFileSize>${DEFAULT_MAX_FILE_SIZE}</maxFileSize>
            </timeBasedFileNamingAndTriggeringPolicy>
            <maxHistory>${DEFAULT_MAX_HISTORY}</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>${PATTERN_CORE}</pattern>
        </encoder>
    </appender>

    <root level="WARN">
        <appender-ref ref="core"/>
    </root>

	<logger name="advice" level="DEBUG" additivity="false">
        <appender-ref ref="advice"/>
    </logger>
    
    <logger name="cognitive" level="DEBUG" additivity="false">
        <appender-ref ref="cognitive"/>
    </logger>

    <logger name="core" level="DEBUG" additivity="false">
        <appender-ref ref="core"/>
    </logger>

    <logger name="data_access" level="DEBUG" additivity="false">
        <appender-ref ref="data_access"/>
    </logger>

    <logger name="system" level="DEBUG" additivity="false">
        <appender-ref ref="system"/>
    </logger>

    <logger name="exceptions" level="ALL" additivity="false">
        <appender-ref ref="exceptions"/>
    </logger>

    <logger name="exceptions_silent" level="ALL" additivity="false">
        <appender-ref ref="exceptions"/>
    </logger>

    <logger name="com.movile.woodpeckers.kernel.http.*" level="DEBUG" additivity="false">
        <appender-ref ref="system"/>
    </logger>

</configuration>
